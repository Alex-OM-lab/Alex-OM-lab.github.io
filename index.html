<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Alejandro Orcajada Meseguer | Administrador de Sistemas y Ciberseguridad</title>
  <meta name="description" content="Portafolio profesional de Alejandro Orcajada Meseguer, Administrador de Sistemas y Ciberseguridad." />
  <link rel="stylesheet" href="assets/css/graph.css">
  <link rel="stylesheet" href="assets/css/cubes.css">
  <link rel="stylesheet" href="assets/css/nav.css">
  <style>
    :root{
      --bg:#0b1220; --panel:#111a2d; --text:#e9eef6; --muted:#a8b2c2;
      --accent:#ff9f1a; --accent-soft:#ffd79a; --radius:14px;
      --nav-font:15.5px; --nav-pad-y:12px; --nav-gap:12px;
      --hero-offset:12vh;

      /* ===== CONTROL GLITCH REAL POR BANDAS ===== */
      --slices: 18;                /* nº de rebanadas (12–24 recomendado) */
      --strong-dur: 180ms;         /* duración del pulso fuerte */
      --small-dur: 120ms;          /* duración del micro-pulso */
      --loop-interval: 2400ms;     /* ritmo de micro-pulsos */
      --strong-every: 6;           /* cada 6º, un pulso fuerte */
      --shift-strong: 18px;        /* desplazamiento lateral máx pulso fuerte */
      --shift-small: 6px;          /* desplazamiento lateral máx micro-pulso */
      --skew-strong: 6deg;         /* deformación en X pulso fuerte */
      --skew-small: 2.5deg;        /* deformación en X micro-pulso */
    }

    *{box-sizing:border-box} html,body{margin:0}
    body{
      font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Inter,"Helvetica Neue",Arial;
      background:
        radial-gradient(1400px 800px at 80% -100px, rgba(255,159,26,.06), transparent 60%),
        radial-gradient(1200px 700px at -200px 20%, rgba(255,215,154,.05), transparent 60%),
        var(--bg);
      color:var(--text)
    }

    .hero-wrap{
      min-height:52vh; display:flex; align-items:center; justify-content:center; text-align:center;
      padding:0 14px 0; margin-top:var(--hero-offset);
    }

    /* ===== TÍTULO BASE ===== */
    #heroTitle{
      position:relative;
      font-size:clamp(36px,4.4vw,56px);
      line-height:1;
      font-weight:900;
      color:var(--accent);
      margin:0 0 10px;
      text-shadow:0 0 18px rgba(255,159,26,.7),0 0 36px rgba(255,159,26,.25);
    }
    #heroTitle .txt{ position:relative; z-index:1; display:inline-block; }

    /* ===== CONTENEDOR DE SLICES ===== */
    .glitch-slices{
      position:absolute; inset:0;
      pointer-events:none;
      display:block;
      /* oculto hasta que se pulse */
      opacity:0;
    }
    /* Cada slice vuelve a dibujar el texto en su sitio y lo recorta */
    .glitch-slice{
      position:absolute; left:0; right:0;
      overflow:hidden;
      will-change:transform;
    }
    .glitch-slice > .copy{
      display:inline-block;
      color:var(--accent);
      text-shadow:
        -1px 0 rgba(0,230,246,.85),
         1px 0 rgba(255,42,109,.85),
         0 0 14px rgba(255,159,26,.45); /* leve RGB solo durante glitch */
      transform-origin:left center;
    }

    /* animaciones rápidas, sin “tembleque” perpetuo */
    @keyframes sliceKickL { 0%{transform:none} 40%{transform:translateX(-1)} 100%{transform:none} }
    @keyframes sliceKickR { 0%{transform:none} 40%{transform:translateX(1)} 100%{transform:none} }

    /* ===== TITLES RESTO ===== */
    .hero h2{font-size:clamp(24px,3.2vw,40px);font-weight:800;margin:4px 0 8px;color:var(--accent-soft);
      text-shadow:0 0 14px rgba(255,159,26,.45)}
    .cursor{display:inline-block;width:.6ch;margin-left:2px;color:var(--accent);filter:drop-shadow(0 0 6px var(--accent));animation:blink .95s steps(1,end) infinite}
    @keyframes blink{50%{opacity:0}}
    .lead{max-width:900px;margin:6px auto 0;font-size:clamp(19px,1.5vw,22px);line-height:1.7;color:var(--text);opacity:0;transform:translateY(10px);transition:opacity .8s ease,transform .8s ease}
    .lead.show{opacity:1;transform:none}

    .container{width:min(1100px,92%);margin:0 auto}
    section{padding:26px 0}
    .section-title{font-size:clamp(24px,3vw,34px);margin:0 0 10px}
    .kicker{color:var(--muted);margin:0 0 20px}
    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:18px}
    .card{background:linear-gradient(180deg,color-mix(in oklab,var(--panel) 92%,#0f1422 8%),var(--panel));border:1px solid rgba(255,255,255,.06);border-radius:var(--radius);padding:16px}
    .project img{width:100%;aspect-ratio:16/10;object-fit:cover;border-radius:10px;border:1px solid rgba(255,255,255,.06)}
    .project h4{margin:10px 0 6px}.project p{margin:0;color:var(--muted)}
    .contact-box{display:grid;grid-template-columns:1.1fr .9fr;gap:22px}
    form{display:grid;gap:12px} input,textarea{background:#0c1323;color:var(--text);border:1px solid rgba(255,255,255,.12);border-radius:10px;padding:12px 14px;font-size:16px}
    textarea{min-height:140px;resize:vertical}
    footer{padding:40px 0;color:#a9b1bd;text-align:center;border-top:1px solid rgba(255,255,255,.06);margin-top:10px}
    @media (max-width:980px){.grid{grid-template-columns:1fr 1fr}.contact-box{grid-template-columns:1fr}}
    @media (max-width:620px){.grid{grid-template-columns:1fr}}

    @media (prefers-reduced-motion:reduce){
      .glitch-slices{display:none}
    }
  </style>

  <!-- ==== Warp real (muy breve) para romper bordes durante el pulso ==== -->
  <svg aria-hidden="true" focusable="false" width="0" height="0" style="position:absolute">
    <filter id="warpStrong" x="-20%" y="-20%" width="140%" height="140%">
      <feTurbulence type="fractalNoise" baseFrequency="0" numOctaves="3" seed="9" result="n">
        <animate id="wFreq" attributeName="baseFrequency" values="0;1.2;0" dur="180ms" begin="indefinite" fill="freeze"/>
      </feTurbulence>
      <feDisplacementMap in="SourceGraphic" in2="n" scale="0" xChannelSelector="R" yChannelSelector="G">
        <animate attributeName="scale" values="0;26;0" dur="180ms" begin="wFreq.begin" fill="freeze"/>
      </feDisplacementMap>
    </filter>
  </svg>
</head>
<body>
  <!-- ========================= NAV ========================== -->
  <header class="topbar">
    <div class="topwrap">
      <a class="brand" href="./"><span class="brand-dot"></span><span>AO · Portafolio</span></a>
      <nav class="menu-left" id="nav" aria-label="Navegación principal"></nav>
      <nav class="menu-right"><a class="nav-link" href="./">Inicio</a></nav>
    </div>
  </header>

  <!-- ========================= HERO ========================== -->
  <div id="home" class="hero-wrap">
    <div class="hero">
      <!-- Título con texto “vivo” y overlay de slices -->
      <h1 id="heroTitle">
        <span class="txt" id="typeName"></span>
        <span class="glitch-slices" aria-hidden="true"></span>
      </h1>
      <h2><span id="typeRole"></span><span class="cursor">|</span></h2>
      <p id="lead" class="lead">Me especializo en diseñar, securizar y operar infraestructuras robustas. Automatizo despliegues, fortalezco defensas y mejoro la fiabilidad de servicios con prácticas DevOps/SecOps.</p>
    </div>
  </div>

  <!-- ========================= CONTENIDO (recortado) ========================== -->
  <main class="container">
    <section id="ciber" aria-labelledby="ciber-title">
      <h2 id="ciber-title" class="section-title">Ciberseguridad</h2>
      <p class="kicker">Security-by-design, hardening y respuesta a incidentes.</p>
      <div class="card">Playbooks de respuesta, aplicación de guías CIS, inventario de activos y SIEM; priorización de riesgos y monitoreo proactivo.</div>
    </section>
    <section id="adm" aria-labelledby="adm-title">
      <h2 id="adm-title" class="section-title">Administración de Sistemas</h2>
      <p class="kicker">Infraestructura reproducible y observable.</p>
      <div class="card">Linux/Windows, IaC (Terraform/Ansible), contenedores (Docker/K8s), redes y servidores (Nginx/Apache), CI/CD y observabilidad.</div>
    </section>
  </main>

  <footer>© <span id="y"></span> Alejandro Orcajada Meseguer — Administrador de Sistemas y Ciberseguridad</footer>

<script>
  /* ========= Año en footer ========= */
  document.getElementById('y').textContent = new Date().getFullYear();

  /* ========= Construcción de SLICES (una vez) ========= */
  function buildSlices(){
    const h1 = document.getElementById('heroTitle');
    const overlay = h1.querySelector('.glitch-slices');
    overlay.innerHTML = '';
    const slices = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--slices'));
    const text = document.getElementById('typeName').textContent || ' ';
    for(let i=0;i<slices;i++){
      const s = document.createElement('span');
      s.className = 'glitch-slice';
      // altura y posición de cada banda
      const top = (i / slices) * 100;
      const next = ((i+1) / slices) * 100;
      s.style.top = top + '%';
      s.style.height = (next - top) + '%';

      // copia del texto (misma fuente/estilo del H1)
      const c = document.createElement('span');
      c.className = 'copy';
      c.textContent = text;
      s.appendChild(c);
      overlay.appendChild(s);
    }
  }

  /* ========= Pulsos ========= */
  let pulseCount = 0, loopTimer = null;

  function pulse(kind){ // 'strong' | 'small'
    const h1 = document.getElementById('heroTitle');
    const overlay = h1.querySelector('.glitch-slices');
    const slices = [...overlay.children];
    if(slices.length === 0) return;

    // Asegura que el texto esté actualizado
    const t = document.getElementById('typeName').textContent;
    slices.forEach(s => { s.firstChild.textContent = t; });

    // Mostrar overlay
    overlay.style.opacity = 1;

    // Parámetros según tipo
    const isStrong = kind === 'strong';
    const dur = parseInt(getComputedStyle(document.documentElement).getPropertyValue(isStrong?'--strong-dur':'--small-dur'));
    const maxShift = parseInt(getComputedStyle(document.documentElement).getPropertyValue(isStrong?'--shift-strong':'--shift-small'));
    const maxSkew = parseFloat(getComputedStyle(document.documentElement).getPropertyValue(isStrong?'--skew-strong':'--skew-small'));

    // Desplaza cada slice en dirección alterna y con jitter,
    // creando la “forma mordida” que ves en la referencia.
    slices.forEach((s, idx) => {
      const copy = s.firstChild;
      const dir = (idx % 2 === 0) ? -1 : 1;                          // alterna L/R
      const noise = (Math.random()*0.6 + 0.4);                       // 0.4–1.0
      const shift = Math.round(maxShift * noise) * dir;
      const skew = (maxSkew * (Math.random()*0.7 + 0.3)) * dir;
      copy.style.transform = `translateX(${shift}px) skewX(${skew})`;
      // animación corta con easing para que no “tiemble”
      copy.style.transition = `transform ${dur}ms cubic-bezier(.2,.7,.2,1)`;
    });

    // Warp real (rompe borde durante el fuerte)
    if(isStrong){
      h1.style.filter = 'url(#warpStrong)';
      document.getElementById('wFreq').beginElement();
      setTimeout(()=>{ h1.style.filter = 'none'; }, dur+20);
    }

    // Reset al final
    setTimeout(()=>{
      overlay.style.opacity = 0;
      slices.forEach(s => { s.firstChild.style.transform='none'; s.firstChild.style.transition=''; });
    }, dur);
  }

  function startPulseLoop(){
    stopPulseLoop();
    const interval = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--loop-interval'));
    const strongEvery = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--strong-every'));
    loopTimer = setInterval(()=>{
      pulseCount++;
      (pulseCount % strongEvery === 1) ? pulse('strong') : pulse('small');
    }, interval);
  }
  function stopPulseLoop(){ if(loopTimer){ clearInterval(loopTimer); loopTimer = null; } }

  // Hover para probar manualmente sin romper el loop
  document.addEventListener('DOMContentLoaded', ()=>{
    const h1 = document.getElementById('heroTitle');
    h1.addEventListener('mouseenter', ()=>pulse('small'));
  });

  /* ========= Typing (tu código, con buildSlices + arranque) ========= */
  (function(){
    const nameText = "Alejandro Orcajada Meseguer";
    const roleText = "Administrador de Sistemas y Ciberseguridad";
    const speed = 44;
    const elName = document.getElementById('typeName');
    const elRole = document.getElementById('typeRole');
    const cursor = document.querySelector('.cursor');
    const lead = document.getElementById('lead');
    let i=0,j=0;

    function typeName(){ if(i<nameText.length){ elName.textContent += nameText.charAt(i++); setTimeout(typeName,speed); } else { setTimeout(typeRole,250);} }
    function typeRole(){ if(j<roleText.length){ elRole.textContent += roleText.charAt(j++); setTimeout(typeRole,speed); } else {
      cursor?.remove(); lead?.classList.add('show');
      // Construye slices con el texto final y lanza pulso fuerte + loop
      buildSlices();
      pulse('strong');
      setTimeout(startPulseLoop, 1000);
    } }

    setTimeout(typeName,300);
  })();
</script>

<script src="assets/js/nav-data.js" defer></script>
<script src="assets/js/nav.js" defer></script>
<script src="assets/js/graph-data.js"></script>
<script src="assets/js/graph.js"></script>
<script src="assets/js/cubes.js"></script>
</body>
</html>
